{"version":3,"file":"static/js/530.50bc623f.chunk.js","mappings":"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","sources":["pages/Login/components/LoginForm.jsx","queries/auth/hooks/useLogin.jsx","../node_modules/jwt-decode/lib/atob.js","../node_modules/jwt-decode/lib/base64_url_decode.js","../node_modules/jwt-decode/lib/index.js","pages/Login/components/googleLogin.jsx","queries/auth/hooks/useGoogleLogin.jsx","styles/styledLogin.jsx","pages/Login/Login.jsx","pages/Login/components/LogoutButton.jsx","queries/auth/hooks/useLogout.jsx","styles/styledForm.jsx"],"sourcesContent":["import { useForm } from \"react-hook-form\";\r\nimport {\r\n  Input,\r\n  Form,\r\n  SubmitInput,\r\n  FormError,\r\n} from \"../../../styles/styledForm\";\r\nimport { useLogin } from \"../../../queries/auth/hooks/useLogin\";\r\n\r\nexport const LoginForm = () => {\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n  } = useForm();\r\n\r\n  const { mutate, isLoading, isSuccess, isError, error } = useLogin();\r\n\r\n  const handleLogin = (loginCredentials) => {\r\n    mutate(loginCredentials);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Form\r\n        onSubmit={handleSubmit((loginCredentials) =>\r\n          handleLogin(loginCredentials)\r\n        )}\r\n      >\r\n        <Input\r\n          {...register(\"email\", {\r\n            required: \"Required\",\r\n          })}\r\n          placeholder=\"Email\"\r\n        />\r\n        <FormError>{errors.email?.message}</FormError>\r\n        <Input\r\n          {...register(\"password\", {\r\n            required: \"Required\",\r\n          })}\r\n          placeholder=\"Password\"\r\n          type=\"password\"\r\n        />\r\n        <FormError>{errors.password?.message}</FormError>\r\n        <SubmitInput type=\"submit\" value=\"Log in\" />\r\n      </Form>\r\n      {isLoading && <div>Loading...</div>}\r\n      {isError && (\r\n        <div>\r\n          {error.message} {error.response.data}\r\n        </div>\r\n      )}\r\n      {isSuccess && <div>Logged In</div>}\r\n    </>\r\n  );\r\n};\r\n","import { useMutation } from \"@tanstack/react-query\";\r\nimport { login } from \"../Auth\";\r\nimport { useContext } from \"react\";\r\nimport { UserContext } from \"../../../context/UserContext\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport const useLogin = () => {\r\n  const { setCurrentUser } = useContext(UserContext);\r\n  const navigate = useNavigate();\r\n\r\n  return useMutation(login, {\r\n    onSuccess: (data) => {\r\n      setCurrentUser(data);\r\n      navigate(\"/\");\r\n    },\r\n  });\r\n};\r\n","/**\n * The code was extracted from:\n * https://github.com/davidchambers/Base64.js\n */\n\nvar chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\nfunction InvalidCharacterError(message) {\n    this.message = message;\n}\n\nInvalidCharacterError.prototype = new Error();\nInvalidCharacterError.prototype.name = \"InvalidCharacterError\";\n\nfunction polyfill(input) {\n    var str = String(input).replace(/=+$/, \"\");\n    if (str.length % 4 == 1) {\n        throw new InvalidCharacterError(\n            \"'atob' failed: The string to be decoded is not correctly encoded.\"\n        );\n    }\n    for (\n        // initialize result and counters\n        var bc = 0, bs, buffer, idx = 0, output = \"\";\n        // get next character\n        (buffer = str.charAt(idx++));\n        // character found in table? initialize bit storage and add its ascii value;\n        ~buffer &&\n        ((bs = bc % 4 ? bs * 64 + buffer : buffer),\n            // and if not first of each 4 characters,\n            // convert the first 8 bits to one ascii character\n            bc++ % 4) ?\n        (output += String.fromCharCode(255 & (bs >> ((-2 * bc) & 6)))) :\n        0\n    ) {\n        // try to find character in table (0-63, not found => -1)\n        buffer = chars.indexOf(buffer);\n    }\n    return output;\n}\n\nexport default (typeof window !== \"undefined\" &&\n    window.atob &&\n    window.atob.bind(window)) ||\npolyfill;","import atob from \"./atob\";\n\nfunction b64DecodeUnicode(str) {\n    return decodeURIComponent(\n        atob(str).replace(/(.)/g, function(m, p) {\n            var code = p.charCodeAt(0).toString(16).toUpperCase();\n            if (code.length < 2) {\n                code = \"0\" + code;\n            }\n            return \"%\" + code;\n        })\n    );\n}\n\nexport default function(str) {\n    var output = str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    switch (output.length % 4) {\n        case 0:\n            break;\n        case 2:\n            output += \"==\";\n            break;\n        case 3:\n            output += \"=\";\n            break;\n        default:\n            throw \"Illegal base64url string!\";\n    }\n\n    try {\n        return b64DecodeUnicode(output);\n    } catch (err) {\n        return atob(output);\n    }\n}","\"use strict\";\n\nimport base64_url_decode from \"./base64_url_decode\";\n\nexport function InvalidTokenError(message) {\n    this.message = message;\n}\n\nInvalidTokenError.prototype = new Error();\nInvalidTokenError.prototype.name = \"InvalidTokenError\";\n\nexport default function(token, options) {\n    if (typeof token !== \"string\") {\n        throw new InvalidTokenError(\"Invalid token specified\");\n    }\n\n    options = options || {};\n    var pos = options.header === true ? 0 : 1;\n    try {\n        return JSON.parse(base64_url_decode(token.split(\".\")[pos]));\n    } catch (e) {\n        throw new InvalidTokenError(\"Invalid token specified: \" + e.message);\n    }\n}","import { useEffect } from \"react\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport { useGoogleLogin } from \"../../../queries/auth/hooks/useGoogleLogin\";\r\n\r\nexport const GoogleLogin = () => {\r\n  const { mutate, isLoading, isSuccess, isError, error } = useGoogleLogin();\r\n\r\n  const handleCallbackResponse = async (response) => {\r\n    var userObject = jwt_decode(response.credential);\r\n\r\n    if (Object.keys(userObject).length !== 0) {\r\n      const googleUser = {\r\n        firstname: userObject.given_name,\r\n        lastname: userObject.family_name,\r\n        email: userObject.email,\r\n        password: null,\r\n      };\r\n      mutate(googleUser);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    /* global google */\r\n    google.accounts.id.initialize({\r\n      client_id: process.env.REACT_APP_GOOGLE_CLIENT_ID,\r\n      callback: handleCallbackResponse,\r\n    });\r\n\r\n    google.accounts.id.renderButton(document.getElementById(\"signInDiv\"), {\r\n      theme: \"outline\",\r\n      size: \"large\",\r\n    });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  if (isLoading) {\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  if (isError) {\r\n    return <div>{error.message}</div>;\r\n  }\r\n\r\n  if (isSuccess) {\r\n    return <div>Logged In</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex justify-center\">\r\n      <div className=\"my-4\" id=\"signInDiv\"></div>\r\n    </div>\r\n  );\r\n};\r\n","import { useMutation } from \"@tanstack/react-query\";\r\nimport { googleLogin } from \"../Auth\";\r\nimport { useContext } from \"react\";\r\nimport { UserContext } from \"../../../context/UserContext\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport const useGoogleLogin = () => {\r\n  const { setCurrentUser } = useContext(UserContext);\r\n  const navigate = useNavigate();\r\n\r\n  return useMutation(googleLogin, {\r\n    onSuccess: (data) => {\r\n      setCurrentUser(data);\r\n      navigate(\"/\");\r\n    },\r\n  });\r\n};\r\n","import tw from \"tailwind-styled-components\";\r\n\r\nexport const LoginContainer = tw.div`\r\n    border-4\r\n    border-primary-darkgreen\r\n    p-4\r\n    my-2\r\n    w-1/4\r\n    min-w-[350px]\r\n    max-w-[496px]\r\n    bg-primary-darkbeige\r\n`;\r\n","import { useContext } from \"react\";\r\nimport { LoginForm } from \"./components/LoginForm\";\r\nimport { LogoutButton } from \"./components/LogoutButton\";\r\nimport { UserContext } from \"../../context/UserContext\";\r\nimport { GoogleLogin } from \"./components/googleLogin\";\r\nimport { LoginContainer } from \"../../styles/styledLogin\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst Login = () => {\r\n  const { user } = useContext(UserContext);\r\n\r\n  return (\r\n    <section>\r\n      <div>\r\n        <h2>{user ? \"Logout\" : \"Login\"}</h2>\r\n        <div className=\"text-center\">\r\n          <LoginContainer>\r\n            {user ? (\r\n              <LogoutButton />\r\n            ) : (\r\n              <div>\r\n                <LoginForm />\r\n                <GoogleLogin />\r\n              </div>\r\n            )}\r\n            <Link to=\"/createaccount\">\r\n              <div>New user?</div>\r\n            </Link>\r\n          </LoginContainer>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import { useLogout } from \"../../../queries/auth/hooks/useLogout\";\r\nimport { StyledLogoutButton } from \"../../../styles/styledButtons\";\r\n\r\nexport const LogoutButton = () => {\r\n  const { mutate, isLoading, isError, error } = useLogout();\r\n\r\n  const handleLogout = () => {\r\n    mutate();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <StyledLogoutButton onClick={() => handleLogout()}>\r\n        Logout\r\n      </StyledLogoutButton>\r\n      {isLoading && <div>Loading...</div>}\r\n      {isError && <div>{error.message}</div>}\r\n    </>\r\n  );\r\n};\r\n","import { useMutation } from \"@tanstack/react-query\";\r\nimport { useContext } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { UserContext } from \"../../../context/UserContext\";\r\nimport { logout } from \"../Auth\";\r\n\r\nexport const useLogout = () => {\r\n  const { removeCurrentUser } = useContext(UserContext);\r\n  const navigate = useNavigate();\r\n\r\n  return useMutation(logout, {\r\n    onSuccess: () => {\r\n      removeCurrentUser();\r\n      navigate(\"/\");\r\n    },\r\n  });\r\n};\r\n","import tw from \"tailwind-styled-components\";\r\n\r\nexport const FormContainer = tw.div`\r\n    w-full\r\n    p-4\r\n    text-center\r\n`;\r\n\r\nexport const Form = tw.form`\r\n    w-full\r\n    flex\r\n    flex-col\r\n    items-center\r\n    gap-2\r\n`;\r\n\r\nexport const FormWithLabel = tw.form`\r\n    w-full\r\n    flex\r\n    flex-col\r\n    items-center\r\n`;\r\n\r\nexport const Input = tw.input`\r\n    w-4/5\r\n    rounded\r\n    hover:shadow-lg\r\n    placeholder: pl-1\r\n`;\r\nexport const Textarea = tw.textarea`\r\n    w-4/5\r\n    rounded\r\n    hover:shadow-lg\r\n    placeholder: pl-1\r\n`;\r\nexport const Select = tw.select`\r\n    w-4/5\r\n    rounded\r\n    hover:shadow-lg\r\n    placeholder: pl-1\r\n`;\r\n\r\nexport const SubmitInput = tw.input`\r\n    min-w-[100px]\r\n    p-2\r\n    rounded\r\n    shadow\r\n    bg-primary-darkgreen\r\n    text-white\r\n    hover:scale-110 hover:transition duration-300 cursor-pointer\r\n`;\r\n\r\nexport const FormError = tw.p`\r\n    text-sm\r\n    text-red-700\r\n`;\r\n"],"names":["LoginForm","useForm","register","handleSubmit","errors","formState","setCurrentUser","useContext","UserContext","navigate","useNavigate","useMutation","login","onSuccess","data","useLogin","mutate","isLoading","isSuccess","isError","error","onSubmit","loginCredentials","handleLogin","required","placeholder","email","message","type","password","value","response","InvalidCharacterError","this","prototype","Error","name","window","atob","bind","input","str","String","replace","length","bs","buffer","bc","idx","output","charAt","fromCharCode","indexOf","decodeURIComponent","m","p","code","charCodeAt","toString","toUpperCase","err","InvalidTokenError","token","options","pos","header","JSON","parse","base64_url_decode","split","e","GoogleLogin","googleLogin","useGoogleLogin","handleCallbackResponse","userObject","jwt_decode","credential","Object","keys","googleUser","firstname","given_name","lastname","family_name","useEffect","google","accounts","id","initialize","client_id","process","callback","renderButton","document","getElementById","theme","size","className","LoginContainer","tw","user","LogoutButton","to","removeCurrentUser","logout","useLogout","onClick","FormContainer","Form","Input","Textarea","Select","SubmitInput","FormError"],"sourceRoot":""}