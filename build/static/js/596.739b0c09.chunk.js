"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[596],{7596:function(r,e,t){t.r(e),t.d(e,{default:function(){return f}});var n=t(2791),s=t(5333),i=t(583),c=t(6403),d=t(3418),a=t(3315),o=t(1087),u=t(3035),l=t(4974),x=t(184),h=function(r){var e=r.newOrder;return(0,x.jsxs)(l.iA,{children:[(0,x.jsx)("thead",{children:(0,x.jsxs)(l.nL,{children:[(0,x.jsx)(l.dt,{children:(0,x.jsxs)("b",{children:["#",e[0].order_id]})}),(0,x.jsx)(l.dt,{children:"Product id"}),(0,x.jsx)(l.dt,{children:"Product name"}),(0,x.jsx)(l.dt,{children:"Quantity ordered"}),(0,x.jsx)(l.dt,{children:"Product total"})]})}),(0,x.jsxs)("tbody",{children:[e.map((function(r){return(0,x.jsxs)(l.KA,{children:[(0,x.jsx)(l.Kj,{}),(0,x.jsx)(l.Kj,{children:r.product_id}),(0,x.jsx)(l.Kj,{children:r.product_name}),(0,x.jsx)(l.Kj,{children:r.product_qty}),(0,x.jsxs)(l.Kj,{children:["$",r.product_price*r.product_qty]})]},r.product_id)})),(0,x.jsxs)(l.Th,{children:[(0,x.jsx)(l.Kj,{}),(0,x.jsx)(l.Kj,{children:"Status:"}),(0,x.jsx)(l.Kj,{children:e[0].status}),(0,x.jsx)(l.Kj,{children:"Total:"}),(0,x.jsxs)(l.Kj,{children:["$",e[0].total]})]})]})]})},j=t(2536),p=function(){var r=(0,n.useContext)(s.A),e=(0,n.useContext)(i.S).user,t=r.getCartTotal(),l=function(){var r=(0,n.useContext)(s.A).emptyCart,e=(0,c.NL)();return(0,d.D)(a.LV,{onSuccess:function(){r(),e.invalidateQueries({queryKey:["orders"]}),e.invalidateQueries({queryKey:["user-orders"]}),e.invalidateQueries({queryKey:["user-by-id"]})}})}(),p=l.mutate,f=l.isError,v=l.error,m=l.isLoading,y=l.data;if(!e)return(0,x.jsx)("div",{children:(0,x.jsx)(o.rU,{to:"/login",children:(0,x.jsx)("h5",{className:"hover:scale-110 hover:text-primary-darkbeige hover:transition duration-300",children:"Log in to place an order"})})});if(y){var g=y.data;return(0,x.jsxs)("div",{className:"mt-6",children:[(0,x.jsx)("h5",{children:"Order complete!"}),(0,x.jsx)(h,{newOrder:g}),(0,x.jsxs)("div",{className:"flex gap-4",children:[(0,x.jsx)(o.rU,{to:"/categories",children:(0,x.jsx)(u.zx,{children:"More shopping!"})}),(0,x.jsx)(o.rU,{to:"/user/".concat(e.id),children:(0,x.jsx)(u.zx,{children:"Go to your profile"})})]})]})}return(0,x.jsx)(x.Fragment,{children:t<1?(0,x.jsx)("div",{children:"No items"}):(0,x.jsxs)("div",{children:[(0,x.jsx)(j.t,{}),(0,x.jsxs)("div",{className:"my-2",children:[(0,x.jsx)("b",{children:"Total:"})," $",r.getCartTotal()]}),(0,x.jsxs)("div",{className:"flex gap-4",children:[(0,x.jsx)(u.zx,{onClick:function(){!function(){var n=r.items.map((function(r){return delete r.stock,r}));p({id:e.id,cart:n,total:t})}()},children:"Create Order"}),(0,x.jsxs)("div",{children:[m&&(0,x.jsx)("div",{children:"Loading..."}),f&&(0,x.jsx)("div",{children:null===v||void 0===v?void 0:v.message})]})]})]})})},f=function(){return(0,x.jsx)("section",{children:(0,x.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,x.jsx)("h2",{children:"Checkout"}),(0,x.jsx)(p,{})]})})}},3315:function(r,e,t){t.d(e,{LV:function(){return d},uI:function(){return c}});var n=t(4165),s=t(5861),i=t(3263).Z.create({baseURL:"http://localhost:3000"}),c=function(){var r=(0,s.Z)((0,n.Z)().mark((function r(e){var t;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i.get("/api/orders/userorders/".concat(e));case 2:return t=r.sent,r.abrupt("return",t.data);case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),d=function(){var r=(0,s.Z)((0,n.Z)().mark((function r(e){var t,s,c,d;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.id,s=e.cart,c=e.total,r.next=3,i.post("/api/orders/".concat(t),{cart:s,total:c});case 3:return d=r.sent,r.abrupt("return",d);case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}}]);
//# sourceMappingURL=596.739b0c09.chunk.js.map